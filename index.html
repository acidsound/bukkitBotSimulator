<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
  <link rel="stylesheet/less" type="text/css" href="styles.less" />
  <script type="text/coffeescript">
seq=[]

directions=[[30,0],[0,30],[-30,0],[0,-30]]
direction = 0

deltaX = 30
deltaY = 0

run = ->
  setTimeout ->
    step = seq.shift()
    runStep step
    run() if step
  , 1000

runStep = (step)->
  bot = document.getElementsByTagName('svg')[0]
  servo = bot.getElementById 'servo'
  if step is "F"
    bot.style.left = bot.offsetLeft + directions[direction][0] + 'px'
    bot.style.top = bot.offsetTop + directions[direction][1] + 'px'
  else if step is "B"
    bot.style.left = bot.offsetLeft - directions[direction][0] + 'px'
    bot.style.top = bot.offsetTop - directions[direction][1] + 'px'
  else if step is "L"
    direction = direction is 0 and 3 or direction-1
    servo.setAttribute 'class', "d#{direction}"
  else if step is "R"
    direction = direction is 3 and 0 or direction+1
    servo.setAttribute 'class', "d#{direction}"

document.addEventListener 'DOMContentLoaded', ->
  btnStart = document.getElementById 'start'
  btnStart.addEventListener 'click', ->
    seq = document.getElementById('sequence').value.split("")
    run()    
  </script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/coffee-script/1.1.2/coffee-script.min.js"></script>
</head>
<body>
  <div id="wrap">
  <ul class="grid">
    <li class="col">
      <ul class="row">
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
      </ul>
    </li>
    <li class="col">
      <ul class="row">
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
      </ul>
    </li>
    <li class="col">
      <ul class="row">
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
      </ul>
    </li>
    <li class="col">
      <ul class="row">
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
        <li class="cell"></li>
      </ul>
    </li>
  </ul>
  <svg id="bot">
    <g id="servo" class="d0">
    <circle cx="15" cy="15" r="15"/>
    <rect x="15" y="12" width="15" height="6" />
    </g>
  </svg>
  </div>
  <div id="controller">
    <input id="sequence" type="text" placeholder="make your sequence(ex. FRL)">
    <button id="start">start</button>
  </div>
</body>
</html>
